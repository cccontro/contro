@use "sass:color";

:root {
  --icon--class: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="2 2 20 20"><path d="M12 2a9 9 0 0 1 9 9h-8v8a3 3 0 0 1-3 3 3 3 0 0 1-3-3v-1h2v1a1 1 0 0 0 1 1 1 1 0 0 0 1-1v-8H3a9 9 0 0 1 9-9"></path></svg>');
  --icon--object_property: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M8.5.75a.75.75 0 0 0-1.5 0v5.19L4.391 3.33a.75.75 0 1 0-1.06 1.061L5.939 7H.75a.75.75 0 0 0 0 1.5h5.19l-2.61 2.609a.75.75 0 1 0 1.061 1.06L7 9.561v5.189a.75.75 0 0 0 1.5 0V9.56l2.609 2.61a.75.75 0 1 0 1.06-1.061L9.561 8.5h5.189a.75.75 0 0 0 0-1.5H9.56l2.61-2.609a.75.75 0 0 0-1.061-1.06L8.5 5.939z"></path></svg>');
  --icon--individual: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -1 24 26"><path d="M12 0a3.85 3.85 0 0 0-3.875 3.846A3.84 3.84 0 0 0 9.73 6.969l-2.79 1.85c0 .622.144 1.114.434 1.649H9.83c-.014.245-.014.549-.014.925q0 .037.006.071c-.064 1.353-.507 3.472-3.62 5.842-.816.625-1.423 1.495-1.806 2.533a.3.3 0 0 0-.045.084 8.1 8.1 0 0 0-.39 2.516c0 .1.216 1.561 8.038 1.561s8.038-1.46 8.038-1.561c0-2.227-.824-4.048-2.24-5.133-4.034-3.08-3.586-5.74-3.644-6.838h2.458c.29-.535.434-1.027.434-1.649l-2.79-1.836a3.86 3.86 0 0 0 1.604-3.123A3.87 3.87 0 0 0 13.445.275c-.004-.002-.01.004-.015.004A3.8 3.8 0 0 0 12 0"></path></svg>');
  --icon--rule: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="25 100 974 1000"><path d="M513.5 1100q-100 0-188.25-39T169.5 953.75t-106-157.5T25 606.5Q25 494 69.5 401t121.75-160.25 176.75-104T577 100q67.5 0 130.25 17.25T823 163.75 915.5 229t61.5 74 22 72q0 22-8.25 32.25T970.5 417.5q-15.5 0-35.25-19.5T887 349.75 817 292t-100.25-48.5T577 224q-85.5 0-159.75 29.25t-130.5 81.5T199 456.5t-31.5 150q0 74 26.75 138.5t74.25 113.25 110.25 76.25T513.5 962q62 0 115.5-21.5t93.75-59.75 62.75-89T808 682.5q0-67.5-30.5-121.25t-82.75-85T577 445q-77 0-124.25 44.5t-47.25 117q0 60.5 32.5 93.25t75.5 32.75q31 0 50-13.25t19-36.75q0-16.5-10.5-28.25t-24-22.5-24-23.5T513.5 577q0-20.5 13.75-32.25T563.5 533q31.5 0 61 22.25t48.25 56.5 18.75 70.75q0 48-23.25 86.25t-63.5 60.5-91.25 22.25q-66 0-118.5-32.25t-83-87.75-30.5-125q0-82.5 38.75-148T426 354.75t151-38.25q76.5 0 142.75 28t116 78T913.5 539t28 143.5q0 87-33 162.75t-91.5 133c-39 38.17-84.417 68-136.25 89.5Q603 1100 513.5 1100"/></svg>');
}

// Documentation colors
$yellow: #ffb300;
$blue: #448aff;
$purple: #7c4dff;
$gray: #9e9e9e;

$roles: class, object_property, individual, rule;

$light-theme: (
  // Class
  class: $yellow,
  class-bg: color.change($yellow, $alpha: 0.15),
  class-a: rgb(232, 158, 0),
  // Object Property
  object_property: $blue,
  object_property-bg: color.change($blue, $alpha: 0.15),
  object_property-a: color.scale($blue, $lightness: -20%, $space: oklch),
  // Individual
  individual: $purple,
  individual-bg: color.change($purple, $alpha: 0.15),
  individual-a: color.scale($purple, $lightness: -20%, $space: oklch),
  // Rule
  rule: $gray,
  rule-bg: color.change($gray, $alpha: 0.15),
  rule-a: color.scale($gray, $lightness: -20%, $space: oklch)
);

$dark-theme: (
  // Class
  class: color.scale($yellow, $lightness: -40%, $space: oklch),
  class-bg: color.change($yellow, $alpha: 0.07),
  class-a: color.scale($yellow, $lightness: -30%, $space: oklch),
  // Object Property
  object_property: color.scale($blue, $lightness: -30%, $chroma: -30%, $space: oklch),
  object_property-bg: color.change($blue, $alpha: 0.07),
  object_property-a: color.scale($blue, $lightness: -10%, $chroma: -20%, $space: oklch),
  // Individual
  individual: color.scale($purple, $lightness: -20%, $chroma: -40%, $space: oklch),
  individual-bg: color.scale(color.change($purple, $alpha: 0.07), $lightness: +10%, $space: oklch),
  individual-a: color.scale($purple, $chroma: -25%, $space: oklch),
  // Rule
  rule: color.scale($gray, $lightness: -20%, $space: oklch),
  rule-bg: color.change($gray, $alpha: 0.15),
  rule-a: color.scale($gray, $lightness: -20%, $space: oklch)
);


// Mixin to apply the themes
@mixin set-theme($theme) {
  @each $var, $value in $theme {
    --color-#{$var}: #{color.to-gamut($value, $space: rgb, $method: local-minde)};
  }
}

[data-md-color-scheme="default"] {
  @include set-theme($light-theme);
}

[data-md-color-scheme="slate"] {
  @include set-theme($dark-theme);
}

@mixin admonition-role($role) {
  .md-typeset .admonition.#{$role},
  .md-typeset details.#{$role} {
    border-color: var(--color-#{$role});
  }
  .md-typeset .#{$role} > .admonition-title,
  .md-typeset .#{$role} > summary {
    background-color: var(--color-#{$role}-bg);
  }
  .md-typeset .#{$role} > .admonition-title:before,
  .md-typeset .#{$role} > summary:before {
    background-color: var(--color-#{$role});
    -webkit-mask-image: var(--icon--#{$role});
    mask-image: var(--icon--#{$role});
  }
  .md-typeset .#{$role} > .admonition-title:after,
  .md-typeset .#{$role} > summary:after {
    background-color: var(--color-#{$role});
  }
  .md-typeset details.#{$role}:focus-within {
    box-shadow: 0 0 0 .2rem var(--color-#{$role}-bg);
  }
  .md-typeset a.#{$role}, a.#{$role} + .superscript {
    color: var(--color-#{$role}-a);
  }
}

@each $role in $roles {
  @include admonition-role($role);
}
